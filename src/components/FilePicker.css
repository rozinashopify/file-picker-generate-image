.Polaris-Modal-Dialog {
  --pc-modal-dialog-vertical-spacing: 12rem !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  height: 100vh !important;
}

.Polaris-Modal-Dialog__Modal {
  --pc-modal-dialog-vertical-spacing: 20rem !important;
    max-height: unset !important;
  background: var(--p-color-bg-surface) !important;
  width: 950px !important;
  max-width: 90vw !important;
  margin: 0 auto !important;
  position: relative !important;
  top: 0 !important;
  transform: none !important;
}

@property --angle {
  syntax: "<angle>";
  inherits: false;
  initial-value: 0deg;
}

@keyframes rotate-gradient {
  to {
    --angle: 360deg;
  }
}

.magic-button {
  position: relative;
  display: inline-block;
  --angle: 0deg;
}


.magic-button:before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  border-radius: var(--p-border-radius-200);
  filter: blur(2px);
  background: conic-gradient(
    from var(--angle) at 50% 50%,
    #a0cbff 0deg,
    #d1bdff 90deg,
    #f4c2ff 126deg,
    #ffb9a2 180deg,
    #f4c2ff 234deg,
    #d1bdff 270deg,
    #a0cbff 306deg
  );
  animation: rotate-gradient var(--p-motion-duration-5000) linear infinite;
  z-index: 0;
}

.magic-button .Polaris-Button.Polaris-Button svg {
  fill: var(--p-color-icon-magic) !important;
}

.magic-button .Polaris-Button.Polaris-Button {

  position: relative;
  z-index: 1;
  background: var(--p-color-bg-surface) !important;
  box-shadow: 0rem -0.0625rem 0rem 0rem rgba(181, 181, 181, 0.9) inset,
  0rem 0rem 0rem 0.0625rem rgba(0, 0, 0, 0.15) inset,
  0rem 0.03125rem 0rem 0.09375rem rgba(255, 255, 255, 0.05) inset !important
}

/* Mode transition animations */
.mode-transition {
  transition: all 0.3s ease-in-out;
}

.file-browser-container {
    position: relative;
    height: 570px;
    overflow-y: scroll;
}

.file-browser-container.fade-out {
    overflow: hidden;
}

.file-grid-container {
  transition: opacity 0.25s ease-out, top 0.25s ease-out;
  position: absolute;
  opacity: 1;
}

.file-grid-container.fade-out {
  opacity: 0.2;
}

.action-bar-container {
  transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}

.action-bar-container.fade-out {
  opacity: 0;
  transform: translateY(-10px);
}

.upload-actions-container {
  transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}

.upload-actions-container.fade-out {
  opacity: 0;
  transform: translateY(-10px);
}

.modal-title {
  transition: all 0.3s ease-in-out;
}

/* Generate mode container styles */
.generate-mode-container {
    width: 640px;
    margin: 0 auto;
    position: relative;
    height: 0;
    /* overflow: hidden; */
    transition: height 0.3s ease-in-out;
}

.generate-mode-container.animate-padding {
    animation: container-expand 0.25s ease-in-out forwards;
}

.generate-mode-container.no-padding {
    height: 400px;
}

.generate-mode-container.from-variant {
    height: 400px;
}

/* Add new class for when loading or displaying an image */
.generate-mode-container.with-content {
    height: 600px;
    transform: translateY(30px);
}

.generate-mode-container .Polaris-Badge {
    padding:  var(--p-space-100) var(--p-space-200);
    background-color: var(--p-color-bg-surface);
    color: var(--p-color-text-magic);
    font-weight: var(--p-font-weight-medium);
    box-shadow: 0px 4px 6px -1px rgba(0, 0, 0, 0.04), 0px 1px 2px -0.5px rgba(0, 0, 0, 0.04), 0px 0.5px 0.5px 0px rgba(0, 0, 0, 0.06), 0px 0px 0px 1px rgba(115, 66, 250, 0.10);;
}

.generate-mode-container .Polaris-Badge:hover {
    background-color: var(--p-color-bg-surface-hover);
    cursor: pointer;
}

.generate-mode-input {
    position: relative;
    width: 480px;
    margin: 0 auto;
    opacity: 0;
    transform: translateY(-20px);
    transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
    z-index: 1;
}

.generate-mode-container.animate-padding .generate-mode-input {
    animation: input-slide-in 0.25s ease-in-out forwards;
    animation-delay: 0.15s;
}

/* Update the with-content class to use transition instead of animation */
.generate-mode-container.with-content .generate-mode-input {
    transform: translateY(500px);
    opacity: 1;
    transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
}

/* Add a new keyframe animation for the with-content state */
@keyframes input-slide-down {
    0% {
        opacity: 0;
        transform: translateY(200px);
    }
    100% {
        opacity: 1;
        transform: translateY(450px);
    }
}

@keyframes input-slide-down-variant {
  0% {
    opacity: 0;
    transform: translateY(200px);
  }
  100% {
    opacity: 1;
    transform: translateY(450px);
  }
}

/* Add a new class that uses the animation */
.generate-mode-container.with-content .generate-mode-input {
    animation: input-slide-down 0.25s ease-out forwards;
}

.generate-mode-container.from-variant.with-content .generate-mode-input {
  animation: input-slide-down-variant 0.25s ease-out forwards;
}

.generate-mode-input:before {
    content: '';
    position: absolute;
    top: -1px;
    right: -1px;
    bottom: -1px;
    left: -1px;
    opacity: 40%;
    border-radius: var(--p-border-radius-200);
    filter: blur(0.3rem);
    background: conic-gradient(
      from var(--angle) at 50% 50%,
      #a0cbff 0deg,
      #d1bdff 90deg,
      #f4c2ff 126deg,
      #ffb9a2 180deg,
      #f4c2ff 234deg,
      #d1bdff 270deg,
      #a0cbff 306deg
    );
    animation: rotate-gradient var(--p-motion-duration-5000) linear infinite;
    z-index: 0;
  }

  .generate-mode-input:hover:before {
    content: '';
    position: absolute;
    top: -2px;
    right: -2px;
    bottom: -2px;
    left: -2px;
    opacity: 70%;
    border-radius: var(--p-border-radius-200);
    filter: blur(0.375rem);
    background: conic-gradient(
      from var(--angle) at 50% 50%,
      #a0cbff 0deg,
      #d1bdff 90deg,
      #f4c2ff 126deg,
      #ffb9a2 180deg,
      #f4c2ff 234deg,
      #d1bdff 270deg,
      #a0cbff 306deg
    );
    animation: rotate-gradient var(--p-motion-duration-5000) linear infinite;
    z-index: 0;
  }

.generate-mode-input .faux-input {
    background: var(--p-color-bg-surface);
    position: relative;
    z-index: 1;
    padding: var(--p-space-200) var(--p-space-200) var(--p-space-200) var(--p-space-300);
    border-radius: var(--p-border-radius-200);
    box-shadow: 0px 100px 80px 0px rgba(0, 0, 0, 0.07), 0px 41.778px 33.422px 0px rgba(0, 0, 0, 0.05), 0px 22.336px 17.869px 0px rgba(0, 0, 0, 0.04), 0px 12.522px 10.017px 0px rgba(0, 0, 0, 0.04), 0px 6.65px 5.32px 0px rgba(0, 0, 0, 0.03), 0px 2.767px 2.214px 0px rgba(0, 0, 0, 0.02);
}

.generate-mode-input .faux-input .Polaris-TextField__Backdrop {
    display: none;
}

.generate-mode-input .faux-input .Polaris-TextField__Input {
    padding: var(--p-space-150) 0;
    font-size: var(--p-font-size-350) !important;
    width: 390px;
}

/* Suggestion indicator styles */
.suggestion-indicator {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  pointer-events: none;
  z-index: 2;
  gap: 6px;
}

.suggestion-text {
  color: var(--p-color-text-subdued);
  opacity: 0.6;
  font-size: var(--p-font-size-350);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: calc(100% - 40px);
}

.tab-indicator {
  background-color: var(--p-color-bg-fill-secondary);
  border-radius: var(--p-border-radius-100);
  padding: 2px 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.tab-indicator img {
  width: 16px;
  height: 16px;
  opacity: 0.7;
}

@keyframes fade-in {
  0% {
    opacity: 0;
    transform: translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Generate input container styles */
.generate-input-container {
  display: flex;
  flex-direction: column;
  gap: 16px;
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
  padding: 24px;
  border-radius: var(--p-border-radius-200);
  background: var(--p-color-bg-surface);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  animation: expand-input 0.5s ease-out forwards;
}

@keyframes expand-input {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* Animation for the magic button to input field transition */
.magic-button {
  transition: all 0.5s ease-in-out;
}

.magic-button.expand {
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
}

/* Custom styles for the generate input field */
.generate-input-container .Polaris-TextField {
  width: 100%;
}

.generate-input-container .Polaris-TextField__Input {
  min-height: 100px;
  font-size: 16px;
  padding: 12px;
  border-radius: var(--p-border-radius-200);
  border: 1px solid var(--p-color-border-subdued);
  transition: border-color 0.2s ease-in-out;
}

.generate-input-container .Polaris-TextField__Input:focus {
  border-color: var(--p-color-border-focused);
  box-shadow: 0 0 0 1px var(--p-color-border-focused);
}

.generate-input-container .Polaris-Button {
  align-self: flex-end;
  min-width: 120px;
}

/* Remove padding from Modal.Section in generate mode */
.modal-content.generate-mode-content {
  background-image: radial-gradient(circle, var(--p-color-border-secondary) 1px, transparent 1px);
  background-size: 20px 20px;
  background-position: -10px -10px;
  background-color: var(--p-color-bg-surface);
}

/* Target the section element with class Polaris-Box directly with higher specificity */
.generate-mode .Polaris-Modal-Section > section.Polaris-Box[style*="--pc-box-padding"] {
  --pc-box-padding-block-start-xs: 0 !important;
  --pc-box-padding-block-end-xs: 0 !important;
  --pc-box-padding-inline-start-xs: 0 !important;
  --pc-box-padding-inline-end-xs: 0 !important;
}

/* Additional rule to target the element.style directly */
.generate-mode .Polaris-Modal-Section > section.Polaris-Box {
  --pc-box-padding-block-start-xs: 0 !important;
  --pc-box-padding-block-end-xs: 0 !important;
  --pc-box-padding-inline-start-xs: 0 !important;
  --pc-box-padding-inline-end-xs: 0 !important;
}

.loading-animation {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--p-space-200);
  padding: var(--p-space-400);
  background: var(--p-color-bg-surface);
  border-radius: var(--p-border-radius-200);
  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.04), 0px 4px 6px -1px rgba(0, 0, 0, 0.04), 0px 1px 2px -0.5px rgba(0, 0, 0, 0.04), 0px 0.5px 0.5px 0px rgba(0, 0, 0, 0.06), 0px 0px 0px 1px rgba(0, 0, 0, 0.05);
  animation: slide-down 0.3s ease-out forwards;
}

.generated-image-container {
  width: 100%;
  border-radius: var(--p-border-radius-200);
  overflow: hidden;
  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.04), 0px 4px 6px -1px rgba(0, 0, 0, 0.04), 0px 1px 2px -0.5px rgba(0, 0, 0, 0.04), 0px 0.5px 0.5px 0px rgba(0, 0, 0, 0.06), 0px 0px 0px 1px rgba(0, 0, 0, 0.05);
  animation: fade-in 0.3s ease-out forwards;
}

.generated-image {
  width: 100%;
  height: auto;
  display: block;
  aspect-ratio: 16/9;
  object-fit: cover;
}

@keyframes slide-down {
  0% {
    opacity: 0;
    transform: translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
    transform: scale(0.98);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes container-enter {
    0% {
        opacity: 0;
        transform: translateY(-40px);
    }
    100% {
        opacity: 1;
        transform: translateY(0px);
    }
}

@keyframes padding-animate {
    from {
        padding-top: 0;
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        padding-top: 240px;
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes padding-collapse {
    from {
        padding-top: 240px;
        opacity: 1;
        transform: translateY(0);
    }
    to {
        padding-top: 0;
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes height-expand {
    from {
        height: 0;
        opacity: 0;
    }
    to {
        height: 427px;
        opacity: 1;
    }
}

@keyframes height-collapse {
    from {
        height: 427px;
        opacity: 1;
    }
    to {
        height: 0;
        opacity: 0;
    }
}

/* Add styles for the loading and image containers */
.loading-container, .image-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    border-radius: var(--p-border-radius-200);
    height: 0;
    opacity: 0;
    z-index: 1;
}

.loading-container.animate, .image-container.animate {
    animation: height-expand 0.3s ease-in-out forwards;
}

.loading-container.collapse, .image-container.collapse {
    animation: height-collapse 0.3s ease-in-out forwards;
}


  
.image-action-button button {
    background-color: rgba(0, 0, 0, 0.4) !important;
    color: white !important;
    transition: background-color 0.2s ease-in-out !important;
}
  
.image-action-button:hover button {
    background-color: rgba(0, 0, 0, 0.8) !important;
}
  

.image-action-button .Polaris-Button.Polaris-Button svg {
    fill: var(--p-color-icon-inverse) !important;
}

/* Generate button styles */
.generate-button-container {
  display: inline-block;
  padding: 6px;
}

.generate-button-container .Polaris-Button {
  border-radius: 50%;
  padding: 6px 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.generate-button-container .Polaris-Button svg {
    fill: #FFF !important;
    transition: transform 0.15s ease-in-out !important;
}



.generate-button-container .Polaris-Button:hover svg {
    transform: translateY(-2px);
}

.generate-button-container .Polaris-Button:disabled,
.generate-button-container .Polaris-Button.Polaris-Button--disabled {
  background-color: var(--p-color-bg-fill-transparent-secondary);
}

.generate-button-container .Polaris-Button:disabled svg,
.generate-button-container .Polaris-Button.Polaris-Button--disabled svg {
    fill: #FFF !important;
}

.generate-button-container .Polaris-Button:not(.Polaris-Button--disabled) {
  background-color: var(--p-color-text-magic-secondary);
}

.generate-button-container .Polaris-Button:not(.Polaris-Button--disabled):hover {
    background-color: var(--p-color-text-magic);
  }

.generate-button-container .Polaris-Button:not(.Polaris-Button--disabled) svg {
    fill: #FFF !important;
}

/* Stop button styles */
.stop-button-container {
  display: inline-block;
  padding: 3px;
}

.custom-stop-button {
  border-radius: 50%;
  padding: 8px 6px;
  min-width: 26px;
  min-height: 26px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--p-color-icon-secondary);
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.custom-stop-button:hover {
  background-color: var(--p-color-icon-secondary-hover);
}

.custom-stop-icon {
  width: 8px;
  height: 9px;
  background-color: var(--p-color-bg-surface);
  border-radius: 2px;
}

.generating-indicator {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  z-index: 1;
}

.generating-text {
  color: var(--p-color-text-magic);
  font-size: 14px;
  font-weight: 500;
}

.original-image-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    border-radius: var(--p-border-radius-200);
    overflow: hidden;
    box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.04), 0px 4px 6px -1px rgba(0, 0, 0, 0.04), 0px 1px 2px -0.5px rgba(0, 0, 0, 0.04), 0px 0.5px 0.5px 0px rgba(0, 0, 0, 0.06), 0px 0px 0px 1px rgba(0, 0, 0, 0.05);
    animation: container-enter 0.3s ease-out forwards;
}

.original-image-container img {
  width: 100%;
  height: auto;
  display: block;
  aspect-ratio: 3/2;
  object-fit: cover;
}

@keyframes container-expand {
    0% {
        height: 0;
    }
    100% {
        height: 480px;
    }
}

@keyframes input-slide-in {
    0% {
        opacity: 0;
        transform: translateY(130px);
    }
    100% {
        opacity: 1;
        transform: translateY(220px);
    }
}



.generate-image-button .Polaris-Button svg {
  fill: var(--p-color-icon-magic) !important;
}

.generate-image-button .Polaris-Button .Polaris-Button__Text {
  color: var(--p-color-text-magic) !important;
}

/* Ensure modal is centered on all screen sizes */
.Polaris-Modal {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 100vh !important;
}

.Polaris-Modal__Wrapper {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 100vh !important;
  padding: 0 !important;
}

/* Ensure consistent modal content */
.modal-content {
  transition: height 0.3s ease-in-out;
  overflow-y: auto;
  scrollbar-width: thin;
}

.modal-content::-webkit-scrollbar {
  width: 6px;
}

.modal-content::-webkit-scrollbar-track {
  background: var(--p-color-bg-fill-secondary);
  border-radius: 3px;
}

.modal-content::-webkit-scrollbar-thumb {
  background: var(--p-color-border-subdued);
  border-radius: 3px;
}

/* Custom modal styling to ensure consistent height and centering */
.custom-modal {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.custom-modal .Polaris-Modal {
  height: 600px !important;
  max-height: 80vh !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}


